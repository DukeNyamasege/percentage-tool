<!DOCTYPE HTML>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover" />
<title>Binarytool Analysis Tool</title>
<link rel="stylesheet" type="text/css" href="styles/bootstrap.css">
<link rel="stylesheet" type="text/css" href="fonts/bootstrap-icons.css">
<link rel="stylesheet" type="text/css" href="styles/style.css">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700;800&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="manifest" href="_manifest.json">
<meta id="theme-check" name="theme-color" content="#FFFFFF">
<link rel="apple-touch-icon" sizes="180x180" href="app/icons/icon-192x192.png">
<style>
  /* Base Responsive Styles */
  body {
    background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
    min-height: 100vh;
    font-family: 'Inter', sans-serif;
    overflow-x: hidden;
  }
  
  .page-content {
    background-color: transparent !important;
    padding: 10px;
  }
  
  .card-style {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.05);
    border: none;
    overflow: hidden;
    margin-bottom: 15px;
  }
  
  /* Enhanced Form Controls */
  .form-custom {
    position: relative;
    margin-bottom: 1.5rem;
    transition: all 0.3s ease;
  }
  
  .form-label {
    display: block;
    position: absolute;
    left: 15px;
    top: 12px;
    font-size: 0.9rem;
    color: #7f8c8d;
    transition: all 0.3s ease;
    pointer-events: none;
    background: white;
    padding: 0 5px;
    border-radius: 4px;
    z-index: 1;
  }
  
  .form-label-active {
    top: -8px;
    font-size: 0.75rem;
    color: #3498db !important;
    background: white;
    z-index: 2;
  }
  
  .form-select, .form-control {
    width: 100%;
    padding: 14px 15px;
    font-size: 0.95rem;
    border: 2px solid #e0e6ed;
    border-radius: 10px;
    background-color: #fff;
    color: #2c3e50;
    transition: all 0.3s ease;
    box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    position: relative;
    z-index: 1;
  }
  
  .form-select {
    appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23405261' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 15px center;
    background-size: 16px;
  }
  
  .form-select:focus, .form-control:focus {
    border-color: #3498db;
    box-shadow: 0 0 0 3px rgba(52,152,219,0.2);
    outline: none;
  }
  
  .form-icon i {
    position: absolute;
    right: 15px;
    top: 14px;
    color: #7f8c8d;
    font-size: 1.1rem;
    pointer-events: none;
    transition: all 0.3s ease;
    z-index: 2;
  }
  
  .form-custom:hover i {
    color: #3498db;
  }
  
  /* Enhanced Prediction Display */
  #current, #even_label, #odd_label {
    font-size: 1.8rem;
    font-weight: 700;
    color: #2c3e50;
    text-align: center;
    margin: 10px 0;
    padding: 12px;
    border-radius: 10px;
    background: linear-gradient(145deg, #f8f9fa 0%, #ffffff 100%);
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    border: 1px solid rgba(0,0,0,0.05);
  }
  
  #even_label {
    color: #27ae60;
    background: linear-gradient(145deg, #f0fff4 0%, #ffffff 100%);
  }
  
  #odd_label {
    color: #e74c3c;
    background: linear-gradient(145deg, #fff5f5 0%, #ffffff 100%);
  }
  
  /* Responsive Typography */
  h1 { font-size: calc(1.5rem + 1vw); }
  h3 { font-size: calc(1rem + 0.5vw); }
  
  /* Responsive Layout Adjustments */
  @media (max-width: 768px) {
    .analysis-container {
      flex-direction: column;
    }
    
    .probability-guide, .signal-panel {
      min-width: 100%;
    }
    
    .probability-table th, 
    .probability-table td {
      padding: 8px 4px;
      font-size: 12px;
    }
    
    .signal {
      padding: 10px;
    }
    
    .signal-icon {
      font-size: 18px;
    }
    
    .signal-title {
      font-size: 14px;
    }
    
    .signal-desc {
      font-size: 12px;
    }
    
    #pattern_display {
      font-size: 16px;
    }
    
    .form-select, .form-control {
      padding: 12px 15px;
    }
  }
  
  @media (max-width: 576px) {
    .form-custom {
      margin-bottom: 10px;
    }
    
    .probability-table th, 
    .probability-table td {
      padding: 6px 3px;
      font-size: 11px;
    }
    
    .guide-title {
      font-size: 16px;
    }
    
    #pattern_display {
      font-size: 14px;
      word-break: break-all;
    }
    
    /* Stack columns on very small screens */
    .row.mb-0 > [class*="col-"] {
      width: 100%;
      padding: 0;
    }
    
    #current, #even_label, #odd_label {
      font-size: 1.5rem;
      padding: 10px;
    }
  }
  
  /* Analysis Guide Specific Styles */
  .analysis-container {
    font-family: 'Inter', sans-serif;
    width: 100%;
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
  }
  
  .probability-guide {
    flex: 1;
    min-width: 300px;
    background: white;
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
  }
  
  .signal-panel {
    flex: 1;
    min-width: 300px;
    background: white;
    border-radius: 12px;
    padding: 15px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.05);
    max-height: 600px;
    overflow-y: auto;
  }
  
  .guide-title {
    text-align: center;
    font-size: 18px;
    color: #2c3e50;
    margin-bottom: 15px;
    font-weight: 700;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
  }
  
  .probability-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    margin: 10px 0;
    border-radius: 8px;
    overflow: hidden;
    table-layout: fixed;
  }
  
  .probability-table th, 
  .probability-table td {
    padding: 10px;
    text-align: center;
    border: 1px solid #e0e6ed;
    word-break: break-word;
  }
  
  .probability-table th {
    background-color: #3498db;
    color: white;
    font-weight: 600;
    border-color: #2980b9;
  }
  
  .probability-table tr:nth-child(even) {
    background-color: #f8fafc;
  }
  
  .probability-table tr:hover {
    background-color: #f1f5f9;
  }
  
  .high-prob {
    color: #27ae60;
    font-weight: 700;
  }
  
  .med-prob {
    color: #f39c12;
    font-weight: 700;
  }
  
  .low-prob {
    color: #e74c3c;
    font-weight: 700;
  }
  
  /* Signal styles */
  .signal {
    padding: 12px;
    margin: 10px 0;
    border-radius: 8px;
    display: none;
    align-items: center;
    background: rgba(39, 174, 96, 0.1);
    border-left: 4px solid #27ae60;
    animation: fadeIn 0.4s ease;
    transition: all 0.3s ease;
  }
  
  .signal.active {
    display: flex;
    box-shadow: 0 2px 10px rgba(39, 174, 96, 0.15);
  }
  
  .signal-icon {
    margin-right: 10px;
    font-size: 20px;
    color: #27ae60;
    flex-shrink: 0;
  }
  
  .signal-content {
    flex: 1;
    min-width: 0;
  }
  
  .signal-title {
    font-weight: 700;
    color: #27ae60;
    margin-bottom: 3px;
    font-size: 14px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  .signal-desc {
    font-size: 12px;
    color: #4a5568;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  
  .no-signals {
    text-align: center;
    color: #718096;
    font-style: italic;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 8px;
    margin: 10px 0;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.03); }
    100% { transform: scale(1); }
  }
  
  .pulse {
    animation: pulse 1.2s infinite;
  }
  
  .highlight {
    background-color: rgba(39, 174, 96, 0.15) !important;
    box-shadow: 0 0 0 2px rgba(39, 174, 96, 0.25);
    position: relative;
  }
  
  .highlight::after {
    content: "✓";
    position: absolute;
    top: -8px;
    right: -8px;
    width: 18px;
    height: 18px;
    background: #27ae60;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    font-weight: bold;
  }
  
  /* Chart container */
  .body {
    width: 100%;
    overflow: hidden;
  }
  
  #myChart {
    width: 100% !important;
    height: auto !important;
    max-height: 300px;
  }
</style>
<script>
  // Disable right-click
  document.addEventListener('contextmenu', (e) => e.preventDefault());

  function ctrlShiftKey(e, keyCode) {
    return e.ctrlKey && e.shiftKey && e.keyCode === keyCode.charCodeAt(0);
  }

  document.onkeydown = (e) => {
    // Disable F12, Ctrl + Shift + I, Ctrl + Shift + J, Ctrl + U
    if (
      event.keyCode === 123 ||
      ctrlShiftKey(e, 'I') ||
      ctrlShiftKey(e, 'J') ||
      ctrlShiftKey(e, 'C') ||
      (e.ctrlKey && e.keyCode === 'U'.charCodeAt(0))
    )
      return false;
  };
</script>
</head>

<body onload="changeMarket()">

<div id="page">
    <div class="page-content header-clear-medium">
      <div class="content card-style" id="page_content">
        <br>
        <div class="form-custom form-label form-icon mb-3">
          <i class="bi bi-bar-chart-fill"></i>
          <select class="form-select" id="market" onchange="changeMarket()">
            <option value="R_10" selected>Volatility 10</option>
            <option value="1HZ10V">Volatility 10 (1s)</option>
            <option value="R_25">Volatility 25</option>
            <option value="1HZ25V">Volatility 25 (1s)</option>
            <option value="R_50">Volatility 50</option>
            <option value="1HZ50V">Volatility 50 (1s)</option>
            <option value="R_75">Volatility 75</option>
            <option value="1HZ75V">Volatility 75 (1s)</option>
            <option value="R_100">Volatility 100</option>
            <option value="1HZ100V">Volatility 100 (1s)</option>
            <option value="JD10">Jump Index 10</option>
            <option value="JD25">Jump Index 25</option>
            <option value="JD50">Jump Index 50</option>
            <option value="JD75">Jump Index 75</option>
            <option value="JD100">Jump Index 100</option>
            <option value="RDBEAR">Bear Market</option>
            <option value="RDBULL">Bull Market</option>
          </select>
          <label for="market" class="color-theme form-label">Select a Synthetic Market</label>
        </div>
        <div class="form-custom form-label form-icon mb-3">
          <i class="bi bi-graph-up"></i>
          <select class="form-select" id="contract_type" onchange="changeContractType()">
            <option value="1">Rise/Fall</option>
            <option value="0" selected>Even/Odd</option>
            <option value="2">Over/Under</option>
            <option value="3">Differs/Matches</option>
          </select>
          <label for="contract_type" class="color-theme form-label">Select Trade Type</label>
        </div>
        <div class="row mb-0" id="over_under" style="display:none;">
          <div class="col-6 pe-2">
            <div class="form-custom form-label form-icon mb-3">
              <i class="bi bi-arrow-up"></i>
              <input type="number" class="form-control" id="over_input" step="1" value="4" min="0" max="9" oninput="over_under()" required />
              <label for="over_input" class="color-theme form-label">Over</label>
            </div>
          </div>
          <div class="col-6 ps-2">
            <div class="form-custom form-label form-icon mb-3">
              <i class="bi bi-arrow-down"></i>
              <input type="number" class="form-control" id="under_input" step="1" value="5" min="0" max="9" oninput="over_under()" required />
              <label for="under_input" class="color-theme form-label">Under</label>
            </div>
          </div>
        </div>
        <div class="form-custom form-label form-icon mb-3">
          <i class="bi bi-list-ol"></i>
          <input type="number" class="form-control" id="ticks" step="1" placeholder=" " value="120" min="1" max="5000" required />
          <label for="ticks" class="color-theme form-label">Number of Ticks</label>
        </div>
        <h1 align="center">
          <b id="current" class="text-primary">0</b>
        </h1>
        <div class="row mb-0">
          <div id="last_ticks_row" style="display: none; text-align: center;"></div>
        </div>
      </div>
      
      <div class="row mb-0 card-style" style="padding: 15px; margin-top: 15px;">
        <div class="col-6 pe-0">
          <div class="content pb-0">
            <h3 align="center" id="even_label">0</h3>
          </div>
        </div>
        <div class="col-6 ps-0">
          <div class="content pb-0">
            <h3 align="center" id="odd_label">0</h3>
          </div>
        </div>
      </div>
      
      <div class="card-style" style="padding: 15px; margin-top: 15px;">
        <div class="col-12">
          <div class="content pb-0">
            <h3 align="center">Last 20 Digits Pattern</h3>
            <div id="pattern_display" style="font-size: 20px; text-align: center;"></div>
          </div>
        </div>
      </div>
      
      <input type="hidden" id="even" value="0">
      <input type="hidden" id="odd" value="0">
      <input type="hidden" id="rise" value="0">
      <input type="hidden" id="fall" value="0">
      <input type="hidden" id="over" value="0">
      <input type="hidden" id="under" value="0">
      <input type="hidden" id="digit0" value="0">
      <input type="hidden" id="digit1" value="0">
      <input type="hidden" id="digit2" value="0">
      <input type="hidden" id="digit3" value="0">
      <input type="hidden" id="digit4" value="0">
      <input type="hidden" id="digit5" value="0">
      <input type="hidden" id="digit6" value="0">
      <input type="hidden" id="digit7" value="0">
      <input type="hidden" id="digit8" value="0">
      <input type="hidden" id="digit9" value="0">
      <input type="hidden" id="previous" value="0">
      <input type="hidden" id="subid" value="774cbfef-72c8-c8e4-42c5-189e941d2379">
      <input type="hidden" id="old_ticks" value="10">
      <input type="hidden" id="token" value="<?php echo $_SESSION['token']; ?>">
      
      <!-- CHARTS STARTS HERE -->
      <div class="body card-style" style="padding: 15px; margin-top: 15px;">
        <canvas id="myChart" width="400px"></canvas>
      </div>
      
      <!-- Analysis Guide -->
      <div class="analysis-guide card-style" style="padding: 15px; margin-top: 15px;">
        <div class="analysis-container">
          <!-- Probability Guide Table -->
          <div class="probability-guide">
            <div class="guide-title">Probability Guide Table</div>
            
            <table class="probability-table">
              <thead>
                <tr>
                  <th>Type</th>
                  <th>1</th>
                  <th>2</th>
                  <th>3</th>
                  <th>4</th>
                  <th>5</th>
                  <th>6</th>
                  <th>7</th>
                  <th>8</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><strong>OVER</strong></td>
                  <td class="high-prob">90%</td>
                  <td class="high-prob">85%</td>
                  <td class="med-prob">70%</td>
                  <td class="med-prob">60%</td>
                  <td>55%</td>
                  <td class="low-prob">40%</td>
                  <td class="low-prob">30%</td>
                  <td class="low-prob">25%</td>
                </tr>
                <tr>
                  <td><strong>UNDER</strong></td>
                  <td class="low-prob">25%</td>
                  <td class="low-prob">30%</td>
                  <td class="low-prob">40%</td>
                  <td>55%</td>
                  <td class="med-prob">60%</td>
                  <td class="med-prob">70%</td>
                  <td class="high-prob">85%</td>
                  <td class="high-prob">90%</td>
                </tr>
              </tbody>
            </table>
            
            <table class="probability-table" style="margin-top: 15px;">
              <thead>
                <tr>
                  <th>Even</th>
                  <th>Odd</th>
                  <th>Rise</th>
                  <th>Fall</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="high-prob">65%</td>
                  <td class="high-prob">65%</td>
                  <td class="high-prob">65%</td>
                  <td class="high-prob">65%</td>
                </tr>
              </tbody>
            </table>
          </div>

          <!-- Signal Panel -->
          <div class="signal-panel">
            <div class="guide-title">Active Signals</div>
            
            <div class="no-signals" id="no-signals">No active signals detected</div>
            
            <!-- Over Signals -->
            <div class="signal" id="over-1-signal">
              <div class="signal-icon">✓</div>
              <div class="signal-content">
                <div class="signal-title">OVER 1 Signal</div>
                <div class="signal-desc">90% probability condition met</div>
              </div>
            </div>
            
            <div class="signal" id="over-2-signal">
              <div class="signal-icon">✓</div>
              <div class="signal-content">
                <div class="signal-title">OVER 2 Signal</div>
                <div class="signal-desc">85% probability condition met</div>
              </div>
            </div>
            
            <div class="signal" id="over-3-signal">
              <div class="signal-icon">✓</div>
              <div class="signal-content">
                <div class="signal-title">OVER 3 Signal</div>
                <div class="signal-desc">70% probability condition met</div>
              </div>
            </div>
            
            <!-- Under Signals -->
            <div class="signal" id="under-6-signal">
              <div class="signal-icon">✓</div>
              <div class="signal-content">
                <div class="signal-title">UNDER 6 Signal</div>
                <div class="signal-desc">70% probability condition met</div>
              </div>
            </div>
            
            <div class="signal" id="under-7-signal">
              <div class="signal-icon">✓</div>
              <div class="signal-content">
                <div class="signal-title">UNDER 7 Signal</div>
                <div class="signal-desc">85% probability condition met</div>
              </div>
            </div>
            
            <div class="signal" id="under-8-signal">
              <div class="signal-icon">✓</div>
              <div class="signal-content">
                <div class="signal-title">UNDER 8 Signal</div>
                <div class="signal-desc">90% probability condition met</div>
              </div>
            </div>
            
            <!-- Indicator Signals -->
            <div class="signal" id="even-signal">
              <div class="signal-icon">✓</div>
              <div class="signal-content">
                <div class="signal-title">EVEN Signal</div>
                <div class="signal-desc">65% probability condition met</div>
              </div>
            </div>
            
            <div class="signal" id="odd-signal">
              <div class="signal-icon">✓</div>
              <div class="signal-content">
                <div class="signal-title">ODD Signal</div>
                <div class="signal-desc">65% probability condition met</div>
              </div>
            </div>
            
            <div class="signal" id="rise-signal">
              <div class="signal-icon">✓</div>
              <div class="signal-content">
                <div class="signal-title">RISE Signal</div>
                <div class="signal-desc">65% probability condition met</div>
              </div>
            </div>
            
            <div class="signal" id="fall-signal">
              <div class="signal-icon">✓</div>
              <div class="signal-content">
                <div class="signal-title">FALL Signal</div>
                <div class="signal-desc">65% probability condition met</div>
              </div>
            </div>
          </div>

          <script>
            // Market condition thresholds from the guide
            const guideThresholds = {
              over: [90, 85, 70, 60, 55, 40, 30, 25],
              under: [25, 30, 40, 55, 60, 70, 85, 90],
              indicators: [65, 65, 65, 65] // even, odd, rise, fall
            };
            
            // DOM elements
            const noSignalsElement = document.getElementById('no-signals');
            const signalElements = {
              over: [
                document.getElementById('over-1-signal'),
                document.getElementById('over-2-signal'),
                document.getElementById('over-3-signal'),
                null, null, null, null, null
              ],
              under: [
                null, null, null, null, null,
                document.getElementById('under-6-signal'),
                document.getElementById('under-7-signal'),
                document.getElementById('under-8-signal')
              ],
              indicators: [
                document.getElementById('even-signal'),
                document.getElementById('odd-signal'),
                document.getElementById('rise-signal'),
                document.getElementById('fall-signal')
              ]
            };
            
            // Function to calculate market probabilities based on your data
            function calculateMarketProbabilities() {
              // Get your actual market data from the hidden inputs
              const evenCount = parseInt(document.getElementById('even').value) || 0;
              const oddCount = parseInt(document.getElementById('odd').value) || 0;
              const riseCount = parseInt(document.getElementById('rise').value) || 0;
              const fallCount = parseInt(document.getElementById('fall').value) || 0;
              const totalTicks = parseInt(document.getElementById('ticks').value) || 120;
              
              // Get digit counts for Over/Under
              const digitCounts = [];
              for (let i = 0; i <= 9; i++) {
                digitCounts.push(parseInt(document.getElementById('digit' + i).value) || 0);
              }
              
              // Calculate probabilities
              const marketProbabilities = {
                over: [],
                under: [],
                indicators: []
              };
              
              // Calculate Over probabilities (digits 0-9)
              const overThresholds = [1, 2, 3, 4, 5, 6, 7, 8];
              overThresholds.forEach(threshold => {
                let count = 0;
                for (let i = threshold; i <= 9; i++) {
                  count += digitCounts[i];
                }
                marketProbabilities.over.push(Math.round((count / totalTicks) * 100));
              });
              
              // Calculate Under probabilities (digits 0-9)
              const underThresholds = [1, 2, 3, 4, 5, 6, 7, 8];
              underThresholds.forEach(threshold => {
                let count = 0;
                for (let i = 0; i < threshold; i++) {
                  count += digitCounts[i];
                }
                marketProbabilities.under.push(Math.round((count / totalTicks) * 100));
              });
              
              // Calculate indicator probabilities
              marketProbabilities.indicators.push(Math.round((evenCount / totalTicks) * 100));
              marketProbabilities.indicators.push(Math.round((oddCount / totalTicks) * 100));
              marketProbabilities.indicators.push(Math.round((riseCount / totalTicks) * 100));
              marketProbabilities.indicators.push(Math.round((fallCount / totalTicks) * 100));
              
              return marketProbabilities;
            }
            
            // Function to update signals based on actual market data
            function updateSignals() {
              const marketProbabilities = calculateMarketProbabilities();
              let anySignalActive = false;
              
              // Check over conditions
              for (let i = 0; i < 8; i++) {
                if (signalElements.over[i] && marketProbabilities.over[i] >= guideThresholds.over[i]) {
                  signalElements.over[i].classList.add('active', 'pulse');
                  signalElements.over[i].querySelector('.signal-desc').textContent = 
                    `${marketProbabilities.over[i]}% probability (>= ${guideThresholds.over[i]}%)`;
                  anySignalActive = true;
                } else if (signalElements.over[i]) {
                  signalElements.over[i].classList.remove('active', 'pulse');
                }
              }
              
              // Check under conditions
              for (let i = 0; i < 8; i++) {
                if (signalElements.under[i] && marketProbabilities.under[i] >= guideThresholds.under[i]) {
                  signalElements.under[i].classList.add('active', 'pulse');
                  signalElements.under[i].querySelector('.signal-desc').textContent = 
                    `${marketProbabilities.under[i]}% probability (>= ${guideThresholds.under[i]}%)`;
                  anySignalActive = true;
                } else if (signalElements.under[i]) {
                  signalElements.under[i].classList.remove('active', 'pulse');
                }
              }
              
              // Check indicator conditions
              for (let i = 0; i < 4; i++) {
                if (signalElements.indicators[i] && marketProbabilities.indicators[i] >= guideThresholds.indicators[i]) {
                  signalElements.indicators[i].classList.add('active', 'pulse');
                  signalElements.indicators[i].querySelector('.signal-desc').textContent = 
                    `${marketProbabilities.indicators[i]}% probability (>= ${guideThresholds.indicators[i]}%)`;
                  anySignalActive = true;
                } else if (signalElements.indicators[i]) {
                  signalElements.indicators[i].classList.remove('active', 'pulse');
                }
              }
              
              // Toggle "no signals" message
              noSignalsElement.style.display = anySignalActive ? 'none' : 'block';
              
              // Update table highlights
              highlightTableCells(marketProbabilities);
            }
            
            // Highlight corresponding table cells
            function highlightTableCells(marketProbabilities) {
              // Clear all highlights first
              document.querySelectorAll('.probability-table td').forEach(td => {
                td.classList.remove('highlight');
              });
              
              // Highlight active signals for OVER
              for (let i = 0; i < 8; i++) {
                if (signalElements.over[i] && signalElements.over[i].classList.contains('active')) {
                  const cell = document.querySelector(`.probability-table tr:nth-child(1) td:nth-child(${i+2})`);
                  if (cell) cell.classList.add('highlight');
                }
              }
              
              // Highlight active signals for UNDER
              for (let i = 0; i < 8; i++) {
                if (signalElements.under[i] && signalElements.under[i].classList.contains('active')) {
                  const cell = document.querySelector(`.probability-table tr:nth-child(2) td:nth-child(${i+2})`);
                  if (cell) cell.classList.add('highlight');
                }
              }
              
              // Highlight active indicators
              for (let i = 0; i < 4; i++) {
                if (signalElements.indicators[i] && signalElements.indicators[i].classList.contains('active')) {
                  const cell = document.querySelector(`.probability-table:last-child td:nth-child(${i+1})`);
                  if (cell) cell.classList.add('highlight');
                }
              }
            }
            
            // Initialize and connect to your data updates
            document.addEventListener('DOMContentLoaded', function() {
              // Run initial update
              updateSignals();
              
              // Update signals whenever your market data changes
              // This should be connected to your actual data update mechanism
              setInterval(updateSignals, 1000);
              
              // Add hover effects to table cells
              document.querySelectorAll('.probability-table td').forEach(td => {
                td.addEventListener('mouseenter', function() {
                  this.style.transform = 'scale(1.03)';
                  this.style.transition = 'transform 0.2s ease';
                });
                
                td.addEventListener('mouseleave', function() {
                  this.style.transform = 'scale(1)';
                });
              });
            });
          </script>
        </div>
      </div>
    </div>
</div>

<script src="scripts/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/appwrite@13.0.1"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.0.0"></script>
<script src="script.js?ver=1.1"></script>

</body>
</html>
